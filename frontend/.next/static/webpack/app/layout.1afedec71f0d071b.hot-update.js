/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/layout",{

/***/ "(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js":
/*!***********************************************************!*\
  !*** ./node_modules/next/dist/build/polyfills/process.js ***!
  \***********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nvar _global_process, _global_process1;\nmodule.exports = ((_global_process = __webpack_require__.g.process) == null ? void 0 : _global_process.env) && typeof ((_global_process1 = __webpack_require__.g.process) == null ? void 0 : _global_process1.env) === \"object\" ? __webpack_require__.g.process : __webpack_require__(/*! next/dist/compiled/process */ \"(app-pages-browser)/./node_modules/next/dist/compiled/process/browser.js\");\n\n//# sourceMappingURL=process.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvcG9seWZpbGxzL3Byb2Nlc3MuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLHFDQUFxQyxxQkFBTSxpRkFBaUYscUJBQU0sa0VBQWtFLHFCQUFNLFdBQVcsbUJBQU8sQ0FBQyw0R0FBNEI7O0FBRXpQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvcG9seWZpbGxzL3Byb2Nlc3MuanM/NjQyYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfZ2xvYmFsX3Byb2Nlc3MsIF9nbG9iYWxfcHJvY2VzczE7XG5tb2R1bGUuZXhwb3J0cyA9ICgoX2dsb2JhbF9wcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3MpID09IG51bGwgPyB2b2lkIDAgOiBfZ2xvYmFsX3Byb2Nlc3MuZW52KSAmJiB0eXBlb2YgKChfZ2xvYmFsX3Byb2Nlc3MxID0gZ2xvYmFsLnByb2Nlc3MpID09IG51bGwgPyB2b2lkIDAgOiBfZ2xvYmFsX3Byb2Nlc3MxLmVudikgPT09IFwib2JqZWN0XCIgPyBnbG9iYWwucHJvY2VzcyA6IHJlcXVpcmUoXCJuZXh0L2Rpc3QvY29tcGlsZWQvcHJvY2Vzc1wiKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/process/browser.js":
/*!************************************************************!*\
  !*** ./node_modules/next/dist/compiled/process/browser.js ***!
  \************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var __dirname = \"/\";\n(function(){var e={229:function(e){var t=e.exports={};var r;var n;function defaultSetTimout(){throw new Error(\"setTimeout has not been defined\")}function defaultClearTimeout(){throw new Error(\"clearTimeout has not been defined\")}(function(){try{if(typeof setTimeout===\"function\"){r=setTimeout}else{r=defaultSetTimout}}catch(e){r=defaultSetTimout}try{if(typeof clearTimeout===\"function\"){n=clearTimeout}else{n=defaultClearTimeout}}catch(e){n=defaultClearTimeout}})();function runTimeout(e){if(r===setTimeout){return setTimeout(e,0)}if((r===defaultSetTimout||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout){return clearTimeout(e)}if((n===defaultClearTimeout||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var i=[];var o=false;var u;var a=-1;function cleanUpNextTick(){if(!o||!u){return}o=false;if(u.length){i=u.concat(i)}else{a=-1}if(i.length){drainQueue()}}function drainQueue(){if(o){return}var e=runTimeout(cleanUpNextTick);o=true;var t=i.length;while(t){u=i;i=[];while(++a<t){if(u){u[a].run()}}a=-1;t=i.length}u=null;o=false;runClearTimeout(e)}t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}i.push(new Item(e,t));if(i.length===1&&!o){runTimeout(drainQueue)}};function Item(e,t){this.fun=e;this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};t.title=\"browser\";t.browser=true;t.env={};t.argv=[];t.version=\"\";t.versions={};function noop(){}t.on=noop;t.addListener=noop;t.once=noop;t.off=noop;t.removeListener=noop;t.removeAllListeners=noop;t.emit=noop;t.prependListener=noop;t.prependOnceListener=noop;t.listeners=function(e){return[]};t.binding=function(e){throw new Error(\"process.binding is not supported\")};t.cwd=function(){return\"/\"};t.chdir=function(e){throw new Error(\"process.chdir is not supported\")};t.umask=function(){return 0}}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var i=t[r]={exports:{}};var o=true;try{e[r](i,i.exports,__nccwpck_require__);o=false}finally{if(o)delete t[r]}return i.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var r=__nccwpck_require__(229);module.exports=r})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcHJvY2Vzcy9icm93c2VyLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxZQUFZLE9BQU8sZ0JBQWdCLG1CQUFtQixNQUFNLE1BQU0sNEJBQTRCLG1EQUFtRCwrQkFBK0IscURBQXFELFlBQVksSUFBSSxtQ0FBbUMsYUFBYSxLQUFLLG9CQUFvQixTQUFTLG1CQUFtQixJQUFJLHFDQUFxQyxlQUFlLEtBQUssdUJBQXVCLFNBQVMsdUJBQXVCLElBQUksdUJBQXVCLG1CQUFtQix1QkFBdUIsMkNBQTJDLGFBQWEsdUJBQXVCLElBQUksY0FBYyxTQUFTLElBQUksd0JBQXdCLFNBQVMsMEJBQTBCLDRCQUE0QixxQkFBcUIsdUJBQXVCLGdEQUFnRCxlQUFlLHVCQUF1QixJQUFJLFlBQVksU0FBUyxJQUFJLHNCQUFzQixTQUFTLHdCQUF3QixTQUFTLFlBQVksTUFBTSxTQUFTLDJCQUEyQixXQUFXLE9BQU8sUUFBUSxhQUFhLGNBQWMsS0FBSyxLQUFLLGFBQWEsY0FBYyxzQkFBc0IsTUFBTSxPQUFPLGtDQUFrQyxPQUFPLGVBQWUsU0FBUyxJQUFJLEtBQUssYUFBYSxNQUFNLFlBQVksS0FBSyxXQUFXLE9BQU8sUUFBUSxtQkFBbUIsdUJBQXVCLG9DQUFvQyx1QkFBdUIsWUFBWSxtQkFBbUIsS0FBSyxxQkFBcUIsc0JBQXNCLHFCQUFxQix5QkFBeUIsbUJBQW1CLFdBQVcsYUFBYSw4QkFBOEIsaUNBQWlDLGtCQUFrQixlQUFlLFNBQVMsVUFBVSxhQUFhLGNBQWMsaUJBQWlCLFVBQVUsbUJBQW1CLFlBQVksV0FBVyxzQkFBc0IsMEJBQTBCLFlBQVksdUJBQXVCLDJCQUEyQix3QkFBd0IsVUFBVSxzQkFBc0IscURBQXFELGlCQUFpQixXQUFXLG9CQUFvQixtREFBbUQsbUJBQW1CLFlBQVksU0FBUyxnQ0FBZ0MsV0FBVyxrQkFBa0IsaUJBQWlCLFlBQVksWUFBWSxXQUFXLElBQUksc0NBQXNDLFFBQVEsUUFBUSxpQkFBaUIsaUJBQWlCLG1FQUFtRSxTQUFTLEtBQUssK0JBQStCLGlCQUFpQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL3Byb2Nlc3MvYnJvd3Nlci5qcz83NWNiIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe3ZhciBlPXsyMjk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5leHBvcnRzPXt9O3ZhciByO3ZhciBuO2Z1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKXt0aHJvdyBuZXcgRXJyb3IoXCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfWZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQoKXt0aHJvdyBuZXcgRXJyb3IoXCJjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIil9KGZ1bmN0aW9uKCl7dHJ5e2lmKHR5cGVvZiBzZXRUaW1lb3V0PT09XCJmdW5jdGlvblwiKXtyPXNldFRpbWVvdXR9ZWxzZXtyPWRlZmF1bHRTZXRUaW1vdXR9fWNhdGNoKGUpe3I9ZGVmYXVsdFNldFRpbW91dH10cnl7aWYodHlwZW9mIGNsZWFyVGltZW91dD09PVwiZnVuY3Rpb25cIil7bj1jbGVhclRpbWVvdXR9ZWxzZXtuPWRlZmF1bHRDbGVhclRpbWVvdXR9fWNhdGNoKGUpe249ZGVmYXVsdENsZWFyVGltZW91dH19KSgpO2Z1bmN0aW9uIHJ1blRpbWVvdXQoZSl7aWYocj09PXNldFRpbWVvdXQpe3JldHVybiBzZXRUaW1lb3V0KGUsMCl9aWYoKHI9PT1kZWZhdWx0U2V0VGltb3V0fHwhcikmJnNldFRpbWVvdXQpe3I9c2V0VGltZW91dDtyZXR1cm4gc2V0VGltZW91dChlLDApfXRyeXtyZXR1cm4gcihlLDApfWNhdGNoKHQpe3RyeXtyZXR1cm4gci5jYWxsKG51bGwsZSwwKX1jYXRjaCh0KXtyZXR1cm4gci5jYWxsKHRoaXMsZSwwKX19fWZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChlKXtpZihuPT09Y2xlYXJUaW1lb3V0KXtyZXR1cm4gY2xlYXJUaW1lb3V0KGUpfWlmKChuPT09ZGVmYXVsdENsZWFyVGltZW91dHx8IW4pJiZjbGVhclRpbWVvdXQpe249Y2xlYXJUaW1lb3V0O3JldHVybiBjbGVhclRpbWVvdXQoZSl9dHJ5e3JldHVybiBuKGUpfWNhdGNoKHQpe3RyeXtyZXR1cm4gbi5jYWxsKG51bGwsZSl9Y2F0Y2godCl7cmV0dXJuIG4uY2FsbCh0aGlzLGUpfX19dmFyIGk9W107dmFyIG89ZmFsc2U7dmFyIHU7dmFyIGE9LTE7ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCl7aWYoIW98fCF1KXtyZXR1cm59bz1mYWxzZTtpZih1Lmxlbmd0aCl7aT11LmNvbmNhdChpKX1lbHNle2E9LTF9aWYoaS5sZW5ndGgpe2RyYWluUXVldWUoKX19ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpe2lmKG8pe3JldHVybn12YXIgZT1ydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7bz10cnVlO3ZhciB0PWkubGVuZ3RoO3doaWxlKHQpe3U9aTtpPVtdO3doaWxlKCsrYTx0KXtpZih1KXt1W2FdLnJ1bigpfX1hPS0xO3Q9aS5sZW5ndGh9dT1udWxsO289ZmFsc2U7cnVuQ2xlYXJUaW1lb3V0KGUpfXQubmV4dFRpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXt0W3ItMV09YXJndW1lbnRzW3JdfX1pLnB1c2gobmV3IEl0ZW0oZSx0KSk7aWYoaS5sZW5ndGg9PT0xJiYhbyl7cnVuVGltZW91dChkcmFpblF1ZXVlKX19O2Z1bmN0aW9uIEl0ZW0oZSx0KXt0aGlzLmZ1bj1lO3RoaXMuYXJyYXk9dH1JdGVtLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfTt0LnRpdGxlPVwiYnJvd3NlclwiO3QuYnJvd3Nlcj10cnVlO3QuZW52PXt9O3QuYXJndj1bXTt0LnZlcnNpb249XCJcIjt0LnZlcnNpb25zPXt9O2Z1bmN0aW9uIG5vb3AoKXt9dC5vbj1ub29wO3QuYWRkTGlzdGVuZXI9bm9vcDt0Lm9uY2U9bm9vcDt0Lm9mZj1ub29wO3QucmVtb3ZlTGlzdGVuZXI9bm9vcDt0LnJlbW92ZUFsbExpc3RlbmVycz1ub29wO3QuZW1pdD1ub29wO3QucHJlcGVuZExpc3RlbmVyPW5vb3A7dC5wcmVwZW5kT25jZUxpc3RlbmVyPW5vb3A7dC5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuW119O3QuYmluZGluZz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX07dC5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn07dC5jaGRpcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9O3QudW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19fTt2YXIgdD17fTtmdW5jdGlvbiBfX25jY3dwY2tfcmVxdWlyZV9fKHIpe3ZhciBuPXRbcl07aWYobiE9PXVuZGVmaW5lZCl7cmV0dXJuIG4uZXhwb3J0c312YXIgaT10W3JdPXtleHBvcnRzOnt9fTt2YXIgbz10cnVlO3RyeXtlW3JdKGksaS5leHBvcnRzLF9fbmNjd3Bja19yZXF1aXJlX18pO289ZmFsc2V9ZmluYWxseXtpZihvKWRlbGV0ZSB0W3JdfXJldHVybiBpLmV4cG9ydHN9aWYodHlwZW9mIF9fbmNjd3Bja19yZXF1aXJlX18hPT1cInVuZGVmaW5lZFwiKV9fbmNjd3Bja19yZXF1aXJlX18uYWI9X19kaXJuYW1lK1wiL1wiO3ZhciByPV9fbmNjd3Bja19yZXF1aXJlX18oMjI5KTttb2R1bGUuZXhwb3J0cz1yfSkoKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/process/browser.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./app/globals.css":
/*!*************************!*\
  !*** ./app/globals.css ***!
  \*************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"82e6954a1e14\");\nif (true) { module.hot.accept() }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9nbG9iYWxzLmNzcyIsIm1hcHBpbmdzIjoiO0FBQUEsK0RBQWUsY0FBYztBQUM3QixJQUFJLElBQVUsSUFBSSxpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vYXBwL2dsb2JhbHMuY3NzPzJkNDEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCI4MmU2OTU0YTFlMTRcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/globals.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./lib/websocket.ts":
/*!**************************!*\
  !*** ./lib/websocket.ts ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GMCSWebSocket: function() { return /* binding */ GMCSWebSocket; }\n/* harmony export */ });\n/* harmony import */ var fflate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fflate */ \"(app-pages-browser)/./node_modules/fflate/esm/browser.js\");\n/* harmony import */ var _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/stores/simulation */ \"(app-pages-browser)/./lib/stores/simulation.ts\");\n/* harmony import */ var _components_UI_Notification__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/components/UI/Notification */ \"(app-pages-browser)/./components/UI/Notification.tsx\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n\n\n\nconst HEADER_UINT32_COUNT = 8;\nconst HEADER_FLOAT_COUNT = 1;\nconst HEADER_BYTES = (HEADER_UINT32_COUNT + HEADER_FLOAT_COUNT) * 4;\nconst FLAG_COMPRESSED = 1 << 0;\nvar _process_env_NEXT_PUBLIC_WS_HEARTBEAT_MS;\nconst DEFAULT_HEARTBEAT_INTERVAL_MS = Number((_process_env_NEXT_PUBLIC_WS_HEARTBEAT_MS = process.env.NEXT_PUBLIC_WS_HEARTBEAT_MS) !== null && _process_env_NEXT_PUBLIC_WS_HEARTBEAT_MS !== void 0 ? _process_env_NEXT_PUBLIC_WS_HEARTBEAT_MS : 10000);\nvar _process_env_NEXT_PUBLIC_WS_HEARTBEAT_TIMEOUT_MS;\nconst DEFAULT_HEARTBEAT_TIMEOUT_MS = Number((_process_env_NEXT_PUBLIC_WS_HEARTBEAT_TIMEOUT_MS = process.env.NEXT_PUBLIC_WS_HEARTBEAT_TIMEOUT_MS) !== null && _process_env_NEXT_PUBLIC_WS_HEARTBEAT_TIMEOUT_MS !== void 0 ? _process_env_NEXT_PUBLIC_WS_HEARTBEAT_TIMEOUT_MS : 20000);\nvar _process_env_NEXT_PUBLIC_WS_RECONNECT_BASE_MS;\nconst DEFAULT_RECONNECT_BASE_MS = Number((_process_env_NEXT_PUBLIC_WS_RECONNECT_BASE_MS = process.env.NEXT_PUBLIC_WS_RECONNECT_BASE_MS) !== null && _process_env_NEXT_PUBLIC_WS_RECONNECT_BASE_MS !== void 0 ? _process_env_NEXT_PUBLIC_WS_RECONNECT_BASE_MS : 2000);\nvar _process_env_NEXT_PUBLIC_WS_RECONNECT_MAX_MS;\nconst DEFAULT_RECONNECT_MAX_MS = Number((_process_env_NEXT_PUBLIC_WS_RECONNECT_MAX_MS = process.env.NEXT_PUBLIC_WS_RECONNECT_MAX_MS) !== null && _process_env_NEXT_PUBLIC_WS_RECONNECT_MAX_MS !== void 0 ? _process_env_NEXT_PUBLIC_WS_RECONNECT_MAX_MS : 15000);\nclass GMCSWebSocket {\n    connect() {\n        if (this.ws) {\n            return;\n        }\n        const initial = _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__.useSimulationStore.getState();\n        this.lastConnectionState = initial.connected;\n        this.lastSimulationRunning = initial.simulationRunning;\n        this.lastStaleState = initial.isStale;\n        const socket = new WebSocket(this.url);\n        socket.binaryType = \"arraybuffer\";\n        socket.onopen = ()=>{\n            const store = _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__.useSimulationStore.getState();\n            store.setConnected(true);\n            store.updateLastUpdateTime(Date.now());\n            this.startStaleMonitor();\n            this.evaluateStateChange();\n        };\n        socket.onclose = ()=>{\n            const store = _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__.useSimulationStore.getState();\n            store.setConnected(false);\n            store.markStale();\n            this.stopStaleMonitor();\n            this.scheduleReconnect();\n            this.evaluateStateChange();\n        };\n        socket.onerror = ()=>{\n            socket.close();\n        };\n        socket.onmessage = (event)=>{\n            const data = event.data;\n            if (data instanceof ArrayBuffer) {\n                this.handleBuffer(data);\n            } else if (data instanceof Blob) {\n                data.arrayBuffer().then((buffer)=>this.handleBuffer(buffer));\n            } else if (typeof data === \"string\") {\n                this.handleTextMessage(data);\n            }\n        };\n        this.ws = socket;\n    }\n    disconnect() {\n        if (this.reconnectTimer) {\n            clearTimeout(this.reconnectTimer);\n            this.reconnectTimer = null;\n        }\n        this.stopStaleMonitor();\n        if (this.ws) {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    scheduleReconnect() {\n        if (this.reconnectTimer) {\n            return;\n        }\n        this.reconnectTimer = setTimeout(()=>{\n            this.ws = null;\n            this.reconnectTimer = null;\n            this.connect();\n        }, this.reconnectDelay);\n    }\n    handleBuffer(buffer) {\n        if (buffer.byteLength < HEADER_BYTES) {\n            return;\n        }\n        const header = new DataView(buffer, 0, HEADER_BYTES);\n        const downW = header.getUint32(0, true);\n        const downH = header.getUint32(1 * 4, true);\n        const activeCount = header.getUint32(2 * 4, true);\n        const capacity = header.getUint32(3 * 4, true);\n        const flags = header.getUint32(4 * 4, true);\n        const payloadSize = header.getUint32(5 * 4, true);\n        const storedSize = header.getUint32(6 * 4, true);\n        const runningFlag = header.getUint32(7 * 4, true);\n        const simTime = header.getFloat32(8 * 4, true);\n        const store = _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__.useSimulationStore.getState();\n        store.setSimulationRunning(Boolean(runningFlag));\n        if (payloadSize === 0 || storedSize === 0) {\n            store.setTimestamp(simTime);\n            return;\n        }\n        let payload = new Uint8Array(buffer, HEADER_BYTES, storedSize);\n        if (flags & FLAG_COMPRESSED) {\n            payload = (0,fflate__WEBPACK_IMPORTED_MODULE_2__.decompressSync)(payload);\n        } else if (payloadSize !== payload.length) {\n            payload = payload.slice(0, payloadSize);\n        }\n        let offset = 0;\n        const fieldCount = downW * downH;\n        const fieldArray = new Float32Array(payload.buffer, payload.byteOffset + offset, fieldCount);\n        const fieldCopy = new Float32Array(fieldArray);\n        offset += fieldCount * 4;\n        const oscArray = new Float32Array(payload.buffer, payload.byteOffset + offset, activeCount * 3);\n        const oscCopy = new Float32Array(oscArray);\n        offset += activeCount * 3 * 4;\n        const posArray = new Float32Array(payload.buffer, payload.byteOffset + offset, activeCount * 3);\n        const posCopy = new Float32Array(posArray);\n        offset += activeCount * 3 * 4;\n        const maskArray = new Float32Array(payload.buffer, payload.byteOffset + offset, activeCount);\n        const maskCopy = new Float32Array(maskArray);\n        const amplitudes = new Float32Array(activeCount);\n        for(let i = 0; i < activeCount; i += 1){\n            var _maskCopy_i;\n            amplitudes[i] = Math.abs(oscCopy[i * 3]) * ((_maskCopy_i = maskCopy[i]) !== null && _maskCopy_i !== void 0 ? _maskCopy_i : 1);\n        }\n        store.setField(fieldCopy, downW, downH);\n        store.setOscillators(posCopy, amplitudes, Math.min(activeCount, _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__.MAX_SIMULATION_NODES));\n        store.setTimestamp(simTime);\n        this.evaluateStateChange();\n    }\n    startStaleMonitor() {\n        if (this.staleTimer) {\n            return;\n        }\n        this.staleTimer = setInterval(()=>{\n            const before = _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__.useSimulationStore.getState().isStale;\n            _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__.useSimulationStore.getState().checkStaleStatus();\n            const after = _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__.useSimulationStore.getState().isStale;\n            if (before !== after) {\n                this.evaluateStateChange();\n            }\n        }, 1000);\n    }\n    stopStaleMonitor() {\n        if (this.staleTimer) {\n            clearInterval(this.staleTimer);\n            this.staleTimer = null;\n        }\n    }\n    handleTextMessage(raw) {\n        try {\n            const message = JSON.parse(raw);\n            const store = _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__.useSimulationStore.getState();\n            switch(message.type){\n                case \"STATUS\":\n                    {\n                        if (typeof message.simulation_running === \"boolean\") {\n                            store.setSimulationRunning(message.simulation_running);\n                        }\n                        let touched = false;\n                        if (typeof message.sim_time === \"number\") {\n                            store.setTimestamp(message.sim_time);\n                            touched = true;\n                        }\n                        if (!touched) {\n                            store.updateLastUpdateTime(Date.now());\n                        }\n                        this.evaluateStateChange();\n                        break;\n                    }\n                case \"PONG\":\n                    if (typeof message.simulation_running === \"boolean\") {\n                        store.setSimulationRunning(message.simulation_running);\n                    }\n                    store.updateLastUpdateTime(Date.now());\n                    this.evaluateStateChange();\n                    break;\n                default:\n                    break;\n            }\n        } catch (error) {\n            console.warn(\"Failed to parse WebSocket message\", error);\n        }\n    }\n    evaluateStateChange() {\n        const { connected, simulationRunning, isStale } = _lib_stores_simulation__WEBPACK_IMPORTED_MODULE_0__.useSimulationStore.getState();\n        if (this.lastConnectionState !== null && connected !== this.lastConnectionState) {\n            if (connected) {\n                _components_UI_Notification__WEBPACK_IMPORTED_MODULE_1__.notify.success(\"Reconnected to simulation stream.\");\n            } else {\n                _components_UI_Notification__WEBPACK_IMPORTED_MODULE_1__.notify.error(\"Connection to simulation stream lost. Attempting to reconnect...\");\n            }\n        }\n        if (this.lastStaleState !== null && isStale !== this.lastStaleState) {\n            if (isStale && connected) {\n                _components_UI_Notification__WEBPACK_IMPORTED_MODULE_1__.notify.warning(\"Simulation data stream is stale.\");\n            } else if (!isStale) {\n                _components_UI_Notification__WEBPACK_IMPORTED_MODULE_1__.notify.success(\"Simulation data stream restored.\");\n            }\n        }\n        if (this.lastSimulationRunning !== null && simulationRunning !== this.lastSimulationRunning) {\n            if (simulationRunning) {\n                _components_UI_Notification__WEBPACK_IMPORTED_MODULE_1__.notify.success(\"Simulation running.\");\n            } else if (connected && !isStale) {\n                _components_UI_Notification__WEBPACK_IMPORTED_MODULE_1__.notify.warning(\"Simulation stopped.\");\n            }\n        }\n        this.lastConnectionState = connected;\n        this.lastSimulationRunning = simulationRunning;\n        this.lastStaleState = isStale;\n    }\n    constructor(options = {}){\n        this.ws = null;\n        this.reconnectTimer = null;\n        this.staleTimer = null;\n        this.heartbeatTimer = null;\n        this.lastHeartbeatAck = null;\n        this.lastSimulationRunning = null;\n        this.lastConnectionState = false;\n        this.lastStaleState = false;\n        this.reconnectAttempts = 0;\n        const { url = \"ws://localhost:8000/ws\", reconnectDelay = DEFAULT_RECONNECT_BASE_MS } = options;\n        this.url = url;\n        this.baseReconnectDelay = reconnectDelay;\n        this.maxReconnectDelay = DEFAULT_RECONNECT_MAX_MS;\n        this.heartbeatIntervalMs = DEFAULT_HEARTBEAT_INTERVAL_MS;\n        this.heartbeatTimeoutMs = DEFAULT_HEARTBEAT_TIMEOUT_MS;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUNELHFCQUFxQixFQUFFO1lBQzNGLElBQUlDLG1CQUFtQjtnQkFDckJ4QiwrREFBTUEsQ0FBQ3FILE9BQU8sQ0FBQztZQUNqQixPQUFPLElBQUkvRixhQUFhLENBQUNJLFNBQVM7Z0JBQ2hDMUIsK0RBQU1BLENBQUNzSCxPQUFPLENBQUM7WUFDakI7UUFDRjtRQUVBLElBQUksQ0FBQ2pHLG1CQUFtQixHQUFHQztRQUMzQixJQUFJLENBQUNDLHFCQUFxQixHQUFHQztRQUM3QixJQUFJLENBQUNDLGNBQWMsR0FBR0M7SUFDeEI7SUF4T0E2RixZQUFZQyxVQUFnQyxDQUFDLENBQUMsQ0FBRTthQTVCeEN0RyxLQUF1QjthQUV2QnNDLGlCQUF1RDthQUV2RDRDLGFBQW9EO2FBRXBEcUIsaUJBQXdEO2FBRXhEQyxtQkFBa0M7YUFFbENuRyx3QkFBd0M7YUFFeENGLHNCQUFzQjthQUV0QkksaUJBQWlCO2FBWWpCa0csb0JBQW9CO1FBRzFCLE1BQU0sRUFBRTlGLE1BQU0sd0JBQXdCLEVBQUU4QixpQkFBaUIvQyx5QkFBeUIsRUFBRSxHQUFHNEc7UUFDdkYsSUFBSSxDQUFDM0YsR0FBRyxHQUFHQTtRQUNYLElBQUksQ0FBQytGLGtCQUFrQixHQUFHakU7UUFDMUIsSUFBSSxDQUFDa0UsaUJBQWlCLEdBQUcvRztRQUN6QixJQUFJLENBQUNnSCxtQkFBbUIsR0FBR3hIO1FBQzNCLElBQUksQ0FBQ3lILGtCQUFrQixHQUFHckg7SUFDNUI7QUFrT0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbGliL3dlYnNvY2tldC50cz8yMjFhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlY29tcHJlc3NTeW5jIH0gZnJvbSBcImZmbGF0ZVwiO1xyXG5pbXBvcnQgeyB1c2VTaW11bGF0aW9uU3RvcmUsIE1BWF9TSU1VTEFUSU9OX05PREVTIH0gZnJvbSBcIkAvbGliL3N0b3Jlcy9zaW11bGF0aW9uXCI7XHJcbmltcG9ydCB7IG5vdGlmeSB9IGZyb20gXCJAL2NvbXBvbmVudHMvVUkvTm90aWZpY2F0aW9uXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdNQ1NXZWJTb2NrZXRPcHRpb25zIHtcclxuICB1cmw/OiBzdHJpbmc7XHJcbiAgcmVjb25uZWN0RGVsYXk/OiBudW1iZXI7XHJcbn1cclxuXHJcbmNvbnN0IEhFQURFUl9VSU5UMzJfQ09VTlQgPSA4O1xyXG5jb25zdCBIRUFERVJfRkxPQVRfQ09VTlQgPSAxO1xyXG5jb25zdCBIRUFERVJfQllURVMgPSAoSEVBREVSX1VJTlQzMl9DT1VOVCArIEhFQURFUl9GTE9BVF9DT1VOVCkgKiA0O1xyXG5jb25zdCBGTEFHX0NPTVBSRVNTRUQgPSAxIDw8IDA7XHJcblxyXG5jb25zdCBERUZBVUxUX0hFQVJUQkVBVF9JTlRFUlZBTF9NUyA9IE51bWJlcihwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19XU19IRUFSVEJFQVRfTVMgPz8gMTBfMDAwKTtcclxuY29uc3QgREVGQVVMVF9IRUFSVEJFQVRfVElNRU9VVF9NUyA9IE51bWJlcihwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19XU19IRUFSVEJFQVRfVElNRU9VVF9NUyA/PyAyMF8wMDApO1xyXG5jb25zdCBERUZBVUxUX1JFQ09OTkVDVF9CQVNFX01TID0gTnVtYmVyKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1dTX1JFQ09OTkVDVF9CQVNFX01TID8/IDJfMDAwKTtcclxuY29uc3QgREVGQVVMVF9SRUNPTk5FQ1RfTUFYX01TID0gTnVtYmVyKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1dTX1JFQ09OTkVDVF9NQVhfTVMgPz8gMTVfMDAwKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBHTUNTV2ViU29ja2V0IHtcclxuICBwcml2YXRlIHdzOiBXZWJTb2NrZXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJpdmF0ZSByZWNvbm5lY3RUaW1lcjogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJpdmF0ZSBzdGFsZVRpbWVyOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRJbnRlcnZhbD4gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJpdmF0ZSBoZWFydGJlYXRUaW1lcjogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0SW50ZXJ2YWw+IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIHByaXZhdGUgbGFzdEhlYXJ0YmVhdEFjazogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIHByaXZhdGUgbGFzdFNpbXVsYXRpb25SdW5uaW5nOiBib29sZWFuIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIHByaXZhdGUgbGFzdENvbm5lY3Rpb25TdGF0ZSA9IGZhbHNlO1xyXG5cclxuICBwcml2YXRlIGxhc3RTdGFsZVN0YXRlID0gZmFsc2U7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgdXJsOiBzdHJpbmc7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgYmFzZVJlY29ubmVjdERlbGF5OiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4UmVjb25uZWN0RGVsYXk6IG51bWJlcjtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBoZWFydGJlYXRJbnRlcnZhbE1zOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgaGVhcnRiZWF0VGltZW91dE1zOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgcmVjb25uZWN0QXR0ZW1wdHMgPSAwO1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBHTUNTV2ViU29ja2V0T3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCB7IHVybCA9IFwid3M6Ly9sb2NhbGhvc3Q6ODAwMC93c1wiLCByZWNvbm5lY3REZWxheSA9IERFRkFVTFRfUkVDT05ORUNUX0JBU0VfTVMgfSA9IG9wdGlvbnM7XHJcbiAgICB0aGlzLnVybCA9IHVybDtcclxuICAgIHRoaXMuYmFzZVJlY29ubmVjdERlbGF5ID0gcmVjb25uZWN0RGVsYXk7XHJcbiAgICB0aGlzLm1heFJlY29ubmVjdERlbGF5ID0gREVGQVVMVF9SRUNPTk5FQ1RfTUFYX01TO1xyXG4gICAgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zID0gREVGQVVMVF9IRUFSVEJFQVRfSU5URVJWQUxfTVM7XHJcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVvdXRNcyA9IERFRkFVTFRfSEVBUlRCRUFUX1RJTUVPVVRfTVM7XHJcbiAgfVxyXG5cclxuICBjb25uZWN0KCkge1xyXG4gICAgaWYgKHRoaXMud3MpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGluaXRpYWwgPSB1c2VTaW11bGF0aW9uU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgIHRoaXMubGFzdENvbm5lY3Rpb25TdGF0ZSA9IGluaXRpYWwuY29ubmVjdGVkO1xyXG4gICAgdGhpcy5sYXN0U2ltdWxhdGlvblJ1bm5pbmcgPSBpbml0aWFsLnNpbXVsYXRpb25SdW5uaW5nO1xyXG4gICAgdGhpcy5sYXN0U3RhbGVTdGF0ZSA9IGluaXRpYWwuaXNTdGFsZTtcclxuXHJcbiAgICBjb25zdCBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHRoaXMudXJsKTtcclxuICAgIHNvY2tldC5iaW5hcnlUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xyXG5cclxuICAgIHNvY2tldC5vbm9wZW4gPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0b3JlID0gdXNlU2ltdWxhdGlvblN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgIHN0b3JlLnNldENvbm5lY3RlZCh0cnVlKTtcclxuICAgICAgc3RvcmUudXBkYXRlTGFzdFVwZGF0ZVRpbWUoRGF0ZS5ub3coKSk7XHJcbiAgICAgIHRoaXMuc3RhcnRTdGFsZU1vbml0b3IoKTtcclxuICAgICAgdGhpcy5ldmFsdWF0ZVN0YXRlQ2hhbmdlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHNvY2tldC5vbmNsb3NlID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdG9yZSA9IHVzZVNpbXVsYXRpb25TdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgICBzdG9yZS5zZXRDb25uZWN0ZWQoZmFsc2UpO1xyXG4gICAgICBzdG9yZS5tYXJrU3RhbGUoKTtcclxuICAgICAgdGhpcy5zdG9wU3RhbGVNb25pdG9yKCk7XHJcbiAgICAgIHRoaXMuc2NoZWR1bGVSZWNvbm5lY3QoKTtcclxuICAgICAgdGhpcy5ldmFsdWF0ZVN0YXRlQ2hhbmdlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHNvY2tldC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICBzb2NrZXQuY2xvc2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgc29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTtcclxuICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQnVmZmVyKGRhdGEpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgZGF0YS5hcnJheUJ1ZmZlcigpLnRoZW4oKGJ1ZmZlcikgPT4gdGhpcy5oYW5kbGVCdWZmZXIoYnVmZmVyKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZVRleHRNZXNzYWdlKGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMud3MgPSBzb2NrZXQ7XHJcbiAgfVxyXG5cclxuICBkaXNjb25uZWN0KCkge1xyXG4gICAgaWYgKHRoaXMucmVjb25uZWN0VGltZXIpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVjb25uZWN0VGltZXIpO1xyXG4gICAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnN0b3BTdGFsZU1vbml0b3IoKTtcclxuXHJcbiAgICBpZiAodGhpcy53cykge1xyXG4gICAgICB0aGlzLndzLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMud3MgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzY2hlZHVsZVJlY29ubmVjdCgpIHtcclxuICAgIGlmICh0aGlzLnJlY29ubmVjdFRpbWVyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMud3MgPSBudWxsO1xyXG4gICAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbnVsbDtcclxuICAgICAgdGhpcy5jb25uZWN0KCk7XHJcbiAgICB9LCB0aGlzLnJlY29ubmVjdERlbGF5KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaGFuZGxlQnVmZmVyKGJ1ZmZlcjogQXJyYXlCdWZmZXIpIHtcclxuICAgIGlmIChidWZmZXIuYnl0ZUxlbmd0aCA8IEhFQURFUl9CWVRFUykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGVhZGVyID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgMCwgSEVBREVSX0JZVEVTKTtcclxuICAgIGNvbnN0IGRvd25XID0gaGVhZGVyLmdldFVpbnQzMigwLCB0cnVlKTtcclxuICAgIGNvbnN0IGRvd25IID0gaGVhZGVyLmdldFVpbnQzMigxICogNCwgdHJ1ZSk7XHJcbiAgICBjb25zdCBhY3RpdmVDb3VudCA9IGhlYWRlci5nZXRVaW50MzIoMiAqIDQsIHRydWUpO1xyXG4gICAgY29uc3QgY2FwYWNpdHkgPSBoZWFkZXIuZ2V0VWludDMyKDMgKiA0LCB0cnVlKTtcclxuICAgIGNvbnN0IGZsYWdzID0gaGVhZGVyLmdldFVpbnQzMig0ICogNCwgdHJ1ZSk7XHJcbiAgICBjb25zdCBwYXlsb2FkU2l6ZSA9IGhlYWRlci5nZXRVaW50MzIoNSAqIDQsIHRydWUpO1xyXG4gICAgY29uc3Qgc3RvcmVkU2l6ZSA9IGhlYWRlci5nZXRVaW50MzIoNiAqIDQsIHRydWUpO1xyXG4gICAgY29uc3QgcnVubmluZ0ZsYWcgPSBoZWFkZXIuZ2V0VWludDMyKDcgKiA0LCB0cnVlKTtcclxuICAgIGNvbnN0IHNpbVRpbWUgPSBoZWFkZXIuZ2V0RmxvYXQzMig4ICogNCwgdHJ1ZSk7XHJcblxyXG4gICAgY29uc3Qgc3RvcmUgPSB1c2VTaW11bGF0aW9uU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgIHN0b3JlLnNldFNpbXVsYXRpb25SdW5uaW5nKEJvb2xlYW4ocnVubmluZ0ZsYWcpKTtcclxuXHJcbiAgICBpZiAocGF5bG9hZFNpemUgPT09IDAgfHwgc3RvcmVkU2l6ZSA9PT0gMCkge1xyXG4gICAgICBzdG9yZS5zZXRUaW1lc3RhbXAoc2ltVGltZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcGF5bG9hZDogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgSEVBREVSX0JZVEVTLCBzdG9yZWRTaXplKTtcclxuICAgIGlmIChmbGFncyAmIEZMQUdfQ09NUFJFU1NFRCkge1xyXG4gICAgICBwYXlsb2FkID0gZGVjb21wcmVzc1N5bmMocGF5bG9hZCk7XHJcbiAgICB9IGVsc2UgaWYgKHBheWxvYWRTaXplICE9PSBwYXlsb2FkLmxlbmd0aCkge1xyXG4gICAgICBwYXlsb2FkID0gcGF5bG9hZC5zbGljZSgwLCBwYXlsb2FkU2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG9mZnNldCA9IDA7XHJcbiAgICBjb25zdCBmaWVsZENvdW50ID0gZG93blcgKiBkb3duSDtcclxuICAgIGNvbnN0IGZpZWxkQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHBheWxvYWQuYnVmZmVyLCBwYXlsb2FkLmJ5dGVPZmZzZXQgKyBvZmZzZXQsIGZpZWxkQ291bnQpO1xyXG4gICAgY29uc3QgZmllbGRDb3B5ID0gbmV3IEZsb2F0MzJBcnJheShmaWVsZEFycmF5KTtcclxuICAgIG9mZnNldCArPSBmaWVsZENvdW50ICogNDtcclxuXHJcbiAgICBjb25zdCBvc2NBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkocGF5bG9hZC5idWZmZXIsIHBheWxvYWQuYnl0ZU9mZnNldCArIG9mZnNldCwgYWN0aXZlQ291bnQgKiAzKTtcclxuICAgIGNvbnN0IG9zY0NvcHkgPSBuZXcgRmxvYXQzMkFycmF5KG9zY0FycmF5KTtcclxuICAgIG9mZnNldCArPSBhY3RpdmVDb3VudCAqIDMgKiA0O1xyXG5cclxuICAgIGNvbnN0IHBvc0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheShwYXlsb2FkLmJ1ZmZlciwgcGF5bG9hZC5ieXRlT2Zmc2V0ICsgb2Zmc2V0LCBhY3RpdmVDb3VudCAqIDMpO1xyXG4gICAgY29uc3QgcG9zQ29weSA9IG5ldyBGbG9hdDMyQXJyYXkocG9zQXJyYXkpO1xyXG4gICAgb2Zmc2V0ICs9IGFjdGl2ZUNvdW50ICogMyAqIDQ7XHJcblxyXG4gICAgY29uc3QgbWFza0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheShwYXlsb2FkLmJ1ZmZlciwgcGF5bG9hZC5ieXRlT2Zmc2V0ICsgb2Zmc2V0LCBhY3RpdmVDb3VudCk7XHJcbiAgICBjb25zdCBtYXNrQ29weSA9IG5ldyBGbG9hdDMyQXJyYXkobWFza0FycmF5KTtcclxuXHJcbiAgICBjb25zdCBhbXBsaXR1ZGVzID0gbmV3IEZsb2F0MzJBcnJheShhY3RpdmVDb3VudCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGl2ZUNvdW50OyBpICs9IDEpIHtcclxuICAgICAgYW1wbGl0dWRlc1tpXSA9IE1hdGguYWJzKG9zY0NvcHlbaSAqIDNdKSAqIChtYXNrQ29weVtpXSA/PyAxKTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9yZS5zZXRGaWVsZChmaWVsZENvcHksIGRvd25XLCBkb3duSCk7XHJcbiAgICBzdG9yZS5zZXRPc2NpbGxhdG9ycyhwb3NDb3B5LCBhbXBsaXR1ZGVzLCBNYXRoLm1pbihhY3RpdmVDb3VudCwgTUFYX1NJTVVMQVRJT05fTk9ERVMpKTtcclxuICAgIHN0b3JlLnNldFRpbWVzdGFtcChzaW1UaW1lKTtcclxuICAgIHRoaXMuZXZhbHVhdGVTdGF0ZUNoYW5nZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGFydFN0YWxlTW9uaXRvcigpIHtcclxuICAgIGlmICh0aGlzLnN0YWxlVGltZXIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc3RhbGVUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgY29uc3QgYmVmb3JlID0gdXNlU2ltdWxhdGlvblN0b3JlLmdldFN0YXRlKCkuaXNTdGFsZTtcclxuICAgICAgdXNlU2ltdWxhdGlvblN0b3JlLmdldFN0YXRlKCkuY2hlY2tTdGFsZVN0YXR1cygpO1xyXG4gICAgICBjb25zdCBhZnRlciA9IHVzZVNpbXVsYXRpb25TdG9yZS5nZXRTdGF0ZSgpLmlzU3RhbGU7XHJcbiAgICAgIGlmIChiZWZvcmUgIT09IGFmdGVyKSB7XHJcbiAgICAgICAgdGhpcy5ldmFsdWF0ZVN0YXRlQ2hhbmdlKCk7XHJcbiAgICAgIH1cclxuICAgIH0sIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdG9wU3RhbGVNb25pdG9yKCkge1xyXG4gICAgaWYgKHRoaXMuc3RhbGVUaW1lcikge1xyXG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3RhbGVUaW1lcik7XHJcbiAgICAgIHRoaXMuc3RhbGVUaW1lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhbmRsZVRleHRNZXNzYWdlKHJhdzogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShyYXcpO1xyXG4gICAgICBjb25zdCBzdG9yZSA9IHVzZVNpbXVsYXRpb25TdG9yZS5nZXRTdGF0ZSgpO1xyXG5cclxuICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcclxuICAgICAgICBjYXNlIFwiU1RBVFVTXCI6IHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5zaW11bGF0aW9uX3J1bm5pbmcgPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgIHN0b3JlLnNldFNpbXVsYXRpb25SdW5uaW5nKG1lc3NhZ2Uuc2ltdWxhdGlvbl9ydW5uaW5nKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBsZXQgdG91Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnNpbV90aW1lID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgIHN0b3JlLnNldFRpbWVzdGFtcChtZXNzYWdlLnNpbV90aW1lKTtcclxuICAgICAgICAgICAgdG91Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKCF0b3VjaGVkKSB7XHJcbiAgICAgICAgICAgIHN0b3JlLnVwZGF0ZUxhc3RVcGRhdGVUaW1lKERhdGUubm93KCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5ldmFsdWF0ZVN0YXRlQ2hhbmdlKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcIlBPTkdcIjpcclxuICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5zaW11bGF0aW9uX3J1bm5pbmcgPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgIHN0b3JlLnNldFNpbXVsYXRpb25SdW5uaW5nKG1lc3NhZ2Uuc2ltdWxhdGlvbl9ydW5uaW5nKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHN0b3JlLnVwZGF0ZUxhc3RVcGRhdGVUaW1lKERhdGUubm93KCkpO1xyXG4gICAgICAgICAgdGhpcy5ldmFsdWF0ZVN0YXRlQ2hhbmdlKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBwYXJzZSBXZWJTb2NrZXQgbWVzc2FnZVwiLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGV2YWx1YXRlU3RhdGVDaGFuZ2UoKSB7XHJcbiAgICBjb25zdCB7IGNvbm5lY3RlZCwgc2ltdWxhdGlvblJ1bm5pbmcsIGlzU3RhbGUgfSA9IHVzZVNpbXVsYXRpb25TdG9yZS5nZXRTdGF0ZSgpO1xyXG5cclxuICAgIGlmICh0aGlzLmxhc3RDb25uZWN0aW9uU3RhdGUgIT09IG51bGwgJiYgY29ubmVjdGVkICE9PSB0aGlzLmxhc3RDb25uZWN0aW9uU3RhdGUpIHtcclxuICAgICAgaWYgKGNvbm5lY3RlZCkge1xyXG4gICAgICAgIG5vdGlmeS5zdWNjZXNzKCdSZWNvbm5lY3RlZCB0byBzaW11bGF0aW9uIHN0cmVhbS4nKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBub3RpZnkuZXJyb3IoJ0Nvbm5lY3Rpb24gdG8gc2ltdWxhdGlvbiBzdHJlYW0gbG9zdC4gQXR0ZW1wdGluZyB0byByZWNvbm5lY3QuLi4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmxhc3RTdGFsZVN0YXRlICE9PSBudWxsICYmIGlzU3RhbGUgIT09IHRoaXMubGFzdFN0YWxlU3RhdGUpIHtcclxuICAgICAgaWYgKGlzU3RhbGUgJiYgY29ubmVjdGVkKSB7XHJcbiAgICAgICAgbm90aWZ5Lndhcm5pbmcoJ1NpbXVsYXRpb24gZGF0YSBzdHJlYW0gaXMgc3RhbGUuJyk7XHJcbiAgICAgIH0gZWxzZSBpZiAoIWlzU3RhbGUpIHtcclxuICAgICAgICBub3RpZnkuc3VjY2VzcygnU2ltdWxhdGlvbiBkYXRhIHN0cmVhbSByZXN0b3JlZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmxhc3RTaW11bGF0aW9uUnVubmluZyAhPT0gbnVsbCAmJiBzaW11bGF0aW9uUnVubmluZyAhPT0gdGhpcy5sYXN0U2ltdWxhdGlvblJ1bm5pbmcpIHtcclxuICAgICAgaWYgKHNpbXVsYXRpb25SdW5uaW5nKSB7XHJcbiAgICAgICAgbm90aWZ5LnN1Y2Nlc3MoJ1NpbXVsYXRpb24gcnVubmluZy4nKTtcclxuICAgICAgfSBlbHNlIGlmIChjb25uZWN0ZWQgJiYgIWlzU3RhbGUpIHtcclxuICAgICAgICBub3RpZnkud2FybmluZygnU2ltdWxhdGlvbiBzdG9wcGVkLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sYXN0Q29ubmVjdGlvblN0YXRlID0gY29ubmVjdGVkO1xyXG4gICAgdGhpcy5sYXN0U2ltdWxhdGlvblJ1bm5pbmcgPSBzaW11bGF0aW9uUnVubmluZztcclxuICAgIHRoaXMubGFzdFN0YWxlU3RhdGUgPSBpc1N0YWxlO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiZGVjb21wcmVzc1N5bmMiLCJ1c2VTaW11bGF0aW9uU3RvcmUiLCJNQVhfU0lNVUxBVElPTl9OT0RFUyIsIm5vdGlmeSIsIkhFQURFUl9VSU5UMzJfQ09VTlQiLCJIRUFERVJfRkxPQVRfQ09VTlQiLCJIRUFERVJfQllURVMiLCJGTEFHX0NPTVBSRVNTRUQiLCJwcm9jZXNzIiwiREVGQVVMVF9IRUFSVEJFQVRfSU5URVJWQUxfTVMiLCJOdW1iZXIiLCJlbnYiLCJORVhUX1BVQkxJQ19XU19IRUFSVEJFQVRfTVMiLCJERUZBVUxUX0hFQVJUQkVBVF9USU1FT1VUX01TIiwiTkVYVF9QVUJMSUNfV1NfSEVBUlRCRUFUX1RJTUVPVVRfTVMiLCJERUZBVUxUX1JFQ09OTkVDVF9CQVNFX01TIiwiTkVYVF9QVUJMSUNfV1NfUkVDT05ORUNUX0JBU0VfTVMiLCJERUZBVUxUX1JFQ09OTkVDVF9NQVhfTVMiLCJORVhUX1BVQkxJQ19XU19SRUNPTk5FQ1RfTUFYX01TIiwiR01DU1dlYlNvY2tldCIsImNvbm5lY3QiLCJ3cyIsImluaXRpYWwiLCJnZXRTdGF0ZSIsImxhc3RDb25uZWN0aW9uU3RhdGUiLCJjb25uZWN0ZWQiLCJsYXN0U2ltdWxhdGlvblJ1bm5pbmciLCJzaW11bGF0aW9uUnVubmluZyIsImxhc3RTdGFsZVN0YXRlIiwiaXNTdGFsZSIsInNvY2tldCIsIldlYlNvY2tldCIsInVybCIsImJpbmFyeVR5cGUiLCJvbm9wZW4iLCJzdG9yZSIsInNldENvbm5lY3RlZCIsInVwZGF0ZUxhc3RVcGRhdGVUaW1lIiwiRGF0ZSIsIm5vdyIsInN0YXJ0U3RhbGVNb25pdG9yIiwiZXZhbHVhdGVTdGF0ZUNoYW5nZSIsIm9uY2xvc2UiLCJtYXJrU3RhbGUiLCJzdG9wU3RhbGVNb25pdG9yIiwic2NoZWR1bGVSZWNvbm5lY3QiLCJvbmVycm9yIiwiY2xvc2UiLCJvbm1lc3NhZ2UiLCJldmVudCIsImRhdGEiLCJBcnJheUJ1ZmZlciIsImhhbmRsZUJ1ZmZlciIsIkJsb2IiLCJhcnJheUJ1ZmZlciIsInRoZW4iLCJidWZmZXIiLCJoYW5kbGVUZXh0TWVzc2FnZSIsImRpc2Nvbm5lY3QiLCJyZWNvbm5lY3RUaW1lciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJyZWNvbm5lY3REZWxheSIsImJ5dGVMZW5ndGgiLCJoZWFkZXIiLCJEYXRhVmlldyIsImRvd25XIiwiZ2V0VWludDMyIiwiZG93bkgiLCJhY3RpdmVDb3VudCIsImNhcGFjaXR5IiwiZmxhZ3MiLCJwYXlsb2FkU2l6ZSIsInN0b3JlZFNpemUiLCJydW5uaW5nRmxhZyIsInNpbVRpbWUiLCJnZXRGbG9hdDMyIiwic2V0U2ltdWxhdGlvblJ1bm5pbmciLCJCb29sZWFuIiwic2V0VGltZXN0YW1wIiwicGF5bG9hZCIsIlVpbnQ4QXJyYXkiLCJsZW5ndGgiLCJzbGljZSIsIm9mZnNldCIsImZpZWxkQ291bnQiLCJmaWVsZEFycmF5IiwiRmxvYXQzMkFycmF5IiwiYnl0ZU9mZnNldCIsImZpZWxkQ29weSIsIm9zY0FycmF5Iiwib3NjQ29weSIsInBvc0FycmF5IiwicG9zQ29weSIsIm1hc2tBcnJheSIsIm1hc2tDb3B5IiwiYW1wbGl0dWRlcyIsImkiLCJNYXRoIiwiYWJzIiwic2V0RmllbGQiLCJzZXRPc2NpbGxhdG9ycyIsIm1pbiIsInN0YWxlVGltZXIiLCJzZXRJbnRlcnZhbCIsImJlZm9yZSIsImNoZWNrU3RhbGVTdGF0dXMiLCJhZnRlciIsImNsZWFySW50ZXJ2YWwiLCJyYXciLCJtZXNzYWdlIiwiSlNPTiIsInBhcnNlIiwidHlwZSIsInNpbXVsYXRpb25fcnVubmluZyIsInRvdWNoZWQiLCJzaW1fdGltZSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJzdWNjZXNzIiwid2FybmluZyIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsImhlYXJ0YmVhdFRpbWVyIiwibGFzdEhlYXJ0YmVhdEFjayIsInJlY29ubmVjdEF0dGVtcHRzIiwiYmFzZVJlY29ubmVjdERlbGF5IiwibWF4UmVjb25uZWN0RGVsYXkiLCJoZWFydGJlYXRJbnRlcnZhbE1zIiwiaGVhcnRiZWF0VGltZW91dE1zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/websocket.ts\n"));

/***/ })

});